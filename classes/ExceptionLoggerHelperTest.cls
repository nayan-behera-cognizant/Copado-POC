/**
* @author Cognizant Technology Solutuions
* @date 01/04/2017
* @description Test class for ExceptionLoggerHelper functionality .
*/
@istest
public class ExceptionLoggerHelperTest {
    /* 
Description: Method to test ExceptionLoggerHelper functionality.
*/
    static testmethod void CreateException(){
        //create user
        List<User> oUser = [Select Id,FirstName,LastName,UserName,Alias,Country,LanguageLocaleKey from User where isActive=true limit 1 ];
        system.assert(oUser.size()>0);
        system.runAs(oUser[0]){
            ExceptionLoggerHelper.createExceptionLog(oUser[0].id, 'testclass','testmethod','0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC','testtype','testtrace');
            
        } 
        
    }
    /* 
Description: Method to test ExceptionLoggerHelper functionality with Readonly profile.
*/
    static testmethod void CreateexceptionWithReadOnly(){
        CreateTestDataforUnitTest.triggerSettings();
        String orgId = UserInfo.getOrganizationId();
        String uniqueName = orgId;
        uniqueName += String.valueof(Datetime.now()).replace(' ','').replace(':','').replace('-','');
        uniqueName += Integer.valueOf(math.rint(math.random()*1000000));
        Profile prof=[SELECT Id, Name from Profile where Name = 'Read Only' limit 1];
        system.assertNotEquals(null, prof);
        //create user for read only profile
        User oUser = new User();
        oUser.email= 'TestMember'+uniqueName + '@test' +'.com';
        oUser.UserName=  'TestMember' + uniqueName+'@test'+ '.org';
        oUser.Alias = 'Member';
        oUser.TimeZoneSidKey= 'Asia/Tokyo';
        oUser.EmailEncodingKey= 'ISO-8859-1';
        oUser.LocaleSidKey= 'ja_JP';
        oUser.LanguageLocaleKey= 'en_GB';
        oUser.FirstName = 'TestFName';
        oUser.LastName = 'Member'+uniqueName;
        oUser.isActive= true;
        oUser.profileid =prof.Id;
        insert oUser;
        system.assertNotEquals(null, oUser);
        User user=[select FirstName,LastName,email,UserName from User where id=:oUser.id limit 1];
        system.assertNotEquals(null, user);
        system.runAs(user){
            ExceptionLoggerHelper.createExceptionLog(user.id, 'testclass','testmethod','0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC0012400000cbRAPAA2,0012400000lY235AAC,0012400000wTgv5AAC,0012400000wThXMAA0,0012400000wTiLJAA0,0012400000wTiWYAA0,0012400000wTiYpAAK,0012400000wTiffAAC,0012400000wTionAAC,0012400000wTirVAAS,0012400000wTiruAAC,0012400000wTj3pAAC,0012400000wTj49AAC,0012400000wTj7bAAC,0012400000wTj9QAAS,0012400000wTjACAA0,0012400000wTjBuAAK,0012400000wTjG6AAK,0012400000wTjJuAAK,0012400000wTjL6AAK,0012400000wTjMcAAK,0012400000wTjOtAAK,0012400000wTjPhAAK,0012400000wTjQyAAK,0012400000wTjTOAA0,0012400000wTjTaAAK,0012400000wTjU7AAK,0012400000wTjVjAAK,0012400000wTjWNAA0,0012400000wTjXfAAK,0012400000wTjaUAAS,0012400000wTjelAAC','testtype','testtrace');
            
        }
        
    }
}